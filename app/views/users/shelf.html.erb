<%= link_to "本を探す", book_show_form_path, remote: true %>
<div class="page_wrapper">
    <div id="search_book_form"></div>
    <div class="book_img_box">
        <% if @books.present? %>
            <% @books.each do |shelf| %>
                <a href="/books/info/<%= shelf.isbn %>" >
                    <%= image_tag('book_img.svg', class:'book_img') %>
                </a>
                <div class="book_title">本のタイトル</div>
            <% end %>
        <% else %>
            <p>本が登録されていません。</p>
        <% end %>
    </div>
</div>


<script>
$(document).on('turbolinks:load', function() {
    const isbn = $("#isbn").val();
    const url = "https://api.openbd.jp/v1/get?isbn=" + isbn;
    $.getJSON(url, function(data) {
        if (data[0] == null) {
        } else {
            if (data[0].summary.cover == "") {
                $("#thumbnail").html('<img src=\"\" />');
            } else {
                $("#thumbnail").html('<img src=\"' + data[0].summary.cover + '\" style=\"border:solid 1px #000000\" />');
            }
            $("#title").text(data[0].summary.title);
            $("#publisher").text(data[0].summary.publisher);
            $("#volume").text(data[0].summary.volume);
            $("#series").text(data[0].summary.series);
            $("#author").text(data[0].summary.author);
            $("#pubdate").text(data[0].summary.pubdate);
            $("#cover").val(data[0].summary.cover);
            $("#description").text(data[0].onix.CollateralDetail.TextContent[0].Text);
        }
    });
});
</script>
