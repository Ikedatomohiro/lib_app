ãŠçŸ¥ã‚‰ã›
<script type="text/javascript" src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
<%# ã‚¹ãƒãƒ›ãªã©ã‚¿ãƒƒãƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹script %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

<h4>â—ãƒã‚¤ãƒˆæ•°ã‚«ã‚¦ãƒ³ãƒˆ</h4>
<textarea id="byte_count">ğŸ˜š</textarea>
<p id="output_count"></p>

<script>
$(function() {
    // ã‚¯ãƒ©ã‚¹ã®ä»˜ã‘å¤–ã—
    $('.favorite').click(function() {
        if ($(this).hasClass('checked')) {
            console.log('ã‚ã‚Šã¾ã™');
        } else {
            console.log('ã‚ã‚Šã¾ã›ã‚“');
        }
        $(this).toggleClass('checked');
    });

    // ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
    $('.clipboard').click(function() {
        var target = $(this);
        target.select();
        document.execCommand('copy');
    });

    // æ–‡å­—ã®ãƒã‚¤ãƒˆæ•°ã‚«ã‚¦ãƒ³ãƒˆ
    $('#byte_count').keyup(function() {
        var count_target = $('#byte_count').val();
        // console.log(count_target.length);
        var byte_count = getByteLength(count_target);
        var result = 0;
        for(var i=0;i<count_target.length;i++){
          var chr = count_target.charCodeAt(i);
          if((chr >= 0x00 && chr < 0x81) ||
             (chr === 0xf8f0) ||
             (chr >= 0xff61 && chr < 0xffa0) ||
             (chr >= 0xf8f1 && chr < 0xf8f4) ||
             (chr >= 0xD800 && chr <= 0xDBFF) || // ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ä¸Šä½éƒ¨åˆ†
             (chr >= 0xDC00 && chr <= 0xDFFF)    // ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ä¸‹ä½éƒ¨åˆ†
             ){
            //åŠè§’æ–‡å­—ã®å ´åˆã¯1ã‚’åŠ ç®—
            result += 1;
          }else{
            //ãã‚Œä»¥å¤–ã®æ–‡å­—ã®å ´åˆã¯2ã‚’åŠ ç®—
            result += 2;
          }
        }
        $('#output_count').text(result);
        // ãƒã‚¤ãƒˆæ•°ã«ã‚ˆã£ã¦èƒŒæ™¯è‰²ã‚’å¤‰ãˆã‚‹ã€‚
        if (byte_count > 100) {
            $('#output_count').css('background-color', 'red');
        } else {
            $('#output_count').css('background-color', '#ffffff');
        }
    });


































});

function getByteLength(str){
  str = (str==null)?"":str;
  return encodeURI(str).replace(/%../g, "*").length;
}




</script>















