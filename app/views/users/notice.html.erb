お知らせ
<script type="text/javascript" src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
<%# スマホなどタッチアクションで動作するようにするscript %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

<h4>●バイト数カウント</h4>
<textarea id="byte_count">😚</textarea>
<p id="output_count"></p>

<script>
$(function() {
    // クラスの付け外し
    $('.favorite').click(function() {
        if ($(this).hasClass('checked')) {
            console.log('あります');
        } else {
            console.log('ありません');
        }
        $(this).toggleClass('checked');
    });

    // クリックでクリップボードにコピー
    $('.clipboard').click(function() {
        var target = $(this);
        target.select();
        document.execCommand('copy');
    });

    // 文字のバイト数カウント
    $('#byte_count').keyup(function() {
        var count_target = $('#byte_count').val();
        // console.log(count_target.length);
        var byte_count = getByteLength(count_target);
        var result = 0;
        for(var i=0;i<count_target.length;i++){
          var chr = count_target.charCodeAt(i);
          if((chr >= 0x00 && chr < 0x81) ||
             (chr === 0xf8f0) ||
             (chr >= 0xff61 && chr < 0xffa0) ||
             (chr >= 0xf8f1 && chr < 0xf8f4) ||
             (chr >= 0xD800 && chr <= 0xDBFF) || // サロゲートペア上位部分
             (chr >= 0xDC00 && chr <= 0xDFFF)    // サロゲートペア下位部分
             ){
            //半角文字の場合は1を加算
            result += 1;
          }else{
            //それ以外の文字の場合は2を加算
            result += 2;
          }
        }
        $('#output_count').text(result);
        // バイト数によって背景色を変える。
        if (byte_count > 100) {
            $('#output_count').css('background-color', 'red');
        } else {
            $('#output_count').css('background-color', '#ffffff');
        }
    });


































});

function getByteLength(str){
  str = (str==null)?"":str;
  return encodeURI(str).replace(/%../g, "*").length;
}




</script>















